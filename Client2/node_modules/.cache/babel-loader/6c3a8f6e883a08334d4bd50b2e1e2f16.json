{"ast":null,"code":"import _objectSpread from \"D:\\\\gocBaitap\\\\ETan\\\\ICTUedu\\\\Client2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"D:\\\\gocBaitap\\\\ETan\\\\ICTUedu\\\\Client2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\gocBaitap\\\\ETan\\\\ICTUedu\\\\Client2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\gocBaitap\\\\ETan\\\\ICTUedu\\\\Client2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\gocBaitap\\\\ETan\\\\ICTUedu\\\\Client2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\gocBaitap\\\\ETan\\\\ICTUedu\\\\Client2\\\\src\\\\app\\\\views\\\\StockKeepingUnit\\\\StockKeepingUnitEditorDialog.jsx\";\nimport React, { Component } from \"react\";\nimport { Dialog, Button, Grid, FormControlLabel, Switch, DialogActions } from \"@material-ui/core\";\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\nimport { getAllStockKeepingUnits, addNewOrUpdateStockKeepingUnit, searchByPage, checkCode } from './StockKeepingUnitService';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Draggable from 'react-draggable';\nimport Paper from '@material-ui/core/Paper';\nimport NotificationPopup from '../Component/NotificationPopup/NotificationPopup';\n\nfunction PaperComponent(props) {\n  return /*#__PURE__*/React.createElement(Draggable, {\n    handle: \"#draggable-dialog-title\",\n    cancel: '[class*=\"MuiDialogContent-root\"]',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Paper, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }\n  })));\n}\n\nvar StockKeepingUnitEditorDialog = /*#__PURE__*/function (_Component) {\n  _inherits(StockKeepingUnitEditorDialog, _Component);\n\n  var _super = _createSuper(StockKeepingUnitEditorDialog);\n\n  function StockKeepingUnitEditorDialog() {\n    var _this;\n\n    _classCallCheck(this, StockKeepingUnitEditorDialog);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      name: \"\",\n      code: \"\",\n      coefficient: 0,\n      shouldOpenNotificationPopup: false\n    };\n\n    _this.handleChange = function (event, source) {\n      event.persist();\n\n      if (source === \"switch\") {\n        _this.setState({\n          isActive: event.target.checked\n        });\n\n        return;\n      }\n\n      _this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    _this.handleFormSubmit = function () {\n      var id = _this.state.id;\n      var code = _this.state.code; //Nếu trả về false là code chưa sử dụng có thể dùng\n\n      checkCode(id, code).then(function (result) {\n        //Nếu trả về true là code đã được sử dụng\n        if (result.data) {\n          _this.setState({\n            shouldOpenNotificationPopup: true,\n            Notification: \"StockKeepingUnit.noti.dupli_code\"\n          }); // alert(\"Code đã được sử dụng\");\n\n        } else {\n          if (id) {\n            addNewOrUpdateStockKeepingUnit(_objectSpread({}, _this.state)).then(function () {\n              _this.props.handleOKEditClose();\n            });\n          } else {\n            addNewOrUpdateStockKeepingUnit(_objectSpread({}, _this.state)).then(function () {\n              _this.props.handleOKEditClose();\n            });\n          }\n        }\n      });\n    };\n\n    _this.handleDialogClose = function () {\n      _this.setState({\n        shouldOpenNotificationPopup: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(StockKeepingUnitEditorDialog, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {}\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          open = _this$props.open,\n          handleClose = _this$props.handleClose,\n          item = _this$props.item;\n      this.setState(_objectSpread({}, this.props.item), function () {});\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          open = _this$props2.open,\n          handleClose = _this$props2.handleClose,\n          handleOKEditClose = _this$props2.handleOKEditClose,\n          t = _this$props2.t,\n          i18n = _this$props2.i18n;\n      var _this$state = this.state,\n          id = _this$state.id,\n          name = _this$state.name,\n          code = _this$state.code,\n          coefficient = _this$state.coefficient,\n          shouldOpenNotificationPopup = _this$state.shouldOpenNotificationPopup;\n      return /*#__PURE__*/React.createElement(Dialog, {\n        open: open,\n        PaperComponent: PaperComponent,\n        maxWidth: \"md\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 7\n        }\n      }, shouldOpenNotificationPopup && /*#__PURE__*/React.createElement(NotificationPopup, {\n        title: t('general.noti'),\n        open: shouldOpenNotificationPopup // onConfirmDialogClose={this.handleDialogClose}\n        ,\n        onYesClick: this.handleDialogClose,\n        text: t(this.state.Notification),\n        agree: t('general.agree'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(DialogTitle, {\n        style: {\n          cursor: 'move'\n        },\n        id: \"draggable-dialog-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mb-20\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }\n      }, t('general.saveUpdate'))), /*#__PURE__*/React.createElement(ValidatorForm, {\n        ref: \"form\",\n        onSubmit: this.handleFormSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(DialogContent, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        className: \"mb-16\",\n        container: true,\n        spacing: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        sm: 12,\n        xs: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(TextValidator, {\n        className: \"w-100 mb-16\",\n        label: /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 26\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            color: \"red\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 32\n          }\n        }, \"*\"), t('StockKeepingUnit.code')),\n        onChange: this.handleChange,\n        type: \"text\",\n        name: \"code\",\n        value: code,\n        validators: [\"required\"],\n        errorMessages: [\"This field is required\"],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(TextValidator, {\n        className: \"w-100 mb-16\",\n        label: /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 26\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            color: \"red\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 32\n          }\n        }, \"*\"), t('StockKeepingUnit.name')),\n        onChange: this.handleChange,\n        type: \"text\",\n        name: \"name\",\n        value: name,\n        validators: [\"required\"],\n        errorMessages: [\"This field is required\"],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(TextValidator, {\n        className: \"w-100 mb-16\",\n        label: t('StockKeepingUnit.coefficient'),\n        onChange: this.handleChange,\n        type: \"number\",\n        name: \"coefficient\",\n        value: coefficient,\n        validators: ['minNumber:0', 'matchRegexp:^[0-9]+$'],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }\n      })))), /*#__PURE__*/React.createElement(DialogActions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"flex flex-space-between flex-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        className: \"mr-36\",\n        color: \"secondary\",\n        onClick: function onClick() {\n          return _this2.props.handleClose();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 15\n        }\n      }, t('general.cancel')), /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 15\n        }\n      }, t('general.save'))))));\n    }\n  }]);\n\n  return StockKeepingUnitEditorDialog;\n}(Component);\n\nexport default StockKeepingUnitEditorDialog;","map":{"version":3,"sources":["D:/gocBaitap/ETan/ICTUedu/Client2/src/app/views/StockKeepingUnit/StockKeepingUnitEditorDialog.jsx"],"names":["React","Component","Dialog","Button","Grid","FormControlLabel","Switch","DialogActions","ValidatorForm","TextValidator","getAllStockKeepingUnits","addNewOrUpdateStockKeepingUnit","searchByPage","checkCode","DialogTitle","DialogContent","Draggable","Paper","NotificationPopup","PaperComponent","props","StockKeepingUnitEditorDialog","state","name","code","coefficient","shouldOpenNotificationPopup","handleChange","event","source","persist","setState","isActive","target","checked","value","handleFormSubmit","id","then","result","data","Notification","handleOKEditClose","handleDialogClose","open","handleClose","item","t","i18n","cursor","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  Dialog,\r\n  Button,\r\n  Grid,\r\n  FormControlLabel,\r\n  Switch, DialogActions\r\n} from \"@material-ui/core\";\r\nimport { ValidatorForm, TextValidator } from \"react-material-ui-form-validator\";\r\nimport { getAllStockKeepingUnits, addNewOrUpdateStockKeepingUnit, searchByPage, checkCode } from './StockKeepingUnitService';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport Draggable from 'react-draggable';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport NotificationPopup from '../Component/NotificationPopup/NotificationPopup'\r\n\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable handle=\"#draggable-dialog-title\" cancel={'[class*=\"MuiDialogContent-root\"]'}>\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  );\r\n}\r\nclass StockKeepingUnitEditorDialog extends Component {\r\n  state = {\r\n    name: \"\",\r\n    code: \"\",\r\n    coefficient: 0,\r\n    shouldOpenNotificationPopup: false\r\n  };\r\n  handleChange = (event, source) => {\r\n    event.persist();\r\n    if (source === \"switch\") {\r\n      this.setState({ isActive: event.target.checked });\r\n      return;\r\n    }\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  };\r\n\r\n  handleFormSubmit = () => {\r\n    let { id } = this.state;\r\n    let { code } = this.state;\r\n    //Nếu trả về false là code chưa sử dụng có thể dùng\r\n    checkCode(id, code).then((result) => {\r\n      //Nếu trả về true là code đã được sử dụng\r\n      if (result.data) {\r\n        this.setState({shouldOpenNotificationPopup: true,\r\n          Notification:\"StockKeepingUnit.noti.dupli_code\"})\r\n        // alert(\"Code đã được sử dụng\");\r\n      } else {\r\n        if (id) {\r\n          addNewOrUpdateStockKeepingUnit({\r\n            ...this.state\r\n          }).then(() => {\r\n            this.props.handleOKEditClose();\r\n          });\r\n        } else {\r\n          addNewOrUpdateStockKeepingUnit({\r\n            ...this.state\r\n          }).then(() => {\r\n            this.props.handleOKEditClose();\r\n          });\r\n        }\r\n      }\r\n    });\r\n    \r\n  };\r\n\r\n  componentWillMount() {\r\n\r\n  }\r\n  componentDidMount() {\r\n    let { open, handleClose, item } = this.props;\r\n    this.setState({\r\n      ...this.props.item\r\n    }, function () {\r\n\r\n    }\r\n    );\r\n  }\r\n\r\n  handleDialogClose =()=>{\r\n    this.setState({shouldOpenNotificationPopup:false,})\r\n  }\r\n\r\n  render() {\r\n    let { open, handleClose, handleOKEditClose, t, i18n } = this.props;\r\n    let {\r\n      id,\r\n      name,\r\n      code,\r\n      coefficient,\r\n      shouldOpenNotificationPopup\r\n    } = this.state;\r\n    return (\r\n      <Dialog open={open} PaperComponent={PaperComponent} maxWidth=\"md\">\r\n        {shouldOpenNotificationPopup && (\r\n          <NotificationPopup\r\n            title={t('general.noti')}\r\n            open={shouldOpenNotificationPopup}\r\n            // onConfirmDialogClose={this.handleDialogClose}\r\n            onYesClick={this.handleDialogClose}\r\n            text={t(this.state.Notification)}\r\n            agree={t('general.agree')}\r\n          />\r\n        )} \r\n        <DialogTitle style={{ cursor: 'move' }} id=\"draggable-dialog-title\">\r\n          <h4 className=\"mb-20\">{t('general.saveUpdate')}</h4>\r\n        </DialogTitle>\r\n        <ValidatorForm ref=\"form\" onSubmit={this.handleFormSubmit}>\r\n          <DialogContent>\r\n            <Grid className=\"mb-16\" container spacing={4}>\r\n              <Grid item sm={12} xs={12}>\r\n                <TextValidator\r\n                  className=\"w-100 mb-16\"\r\n                  \r\n                  label={<span><span style={{color:\"red\"}}>*</span>{t('StockKeepingUnit.code')}</span>}\r\n                  onChange={this.handleChange}\r\n                  type=\"text\"\r\n                  name=\"code\"\r\n                  value={code}\r\n                  validators={[\"required\"]}\r\n                  errorMessages={[\"This field is required\"]}\r\n                />\r\n                <TextValidator\r\n                  className=\"w-100 mb-16\"\r\n                  label={<span><span style={{color:\"red\"}}>*</span>{t('StockKeepingUnit.name')}</span>}\r\n                  onChange={this.handleChange}\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  value={name}\r\n                  validators={[\"required\"]}\r\n                  errorMessages={[\"This field is required\"]}\r\n                />\r\n                <TextValidator\r\n                  className=\"w-100 mb-16\"\r\n                  label={t('StockKeepingUnit.coefficient')}\r\n                  onChange={this.handleChange}\r\n                  type=\"number\"\r\n                  name=\"coefficient\"\r\n                  value={coefficient}\r\n                  validators={['minNumber:0', 'matchRegexp:^[0-9]+$']}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <div className=\"flex flex-space-between flex-middle\">\r\n              <Button\r\n                variant=\"contained\"\r\n                className=\"mr-36\"\r\n\r\n                color=\"secondary\"\r\n                onClick={() => this.props.handleClose()}\r\n              >\r\n                {t('general.cancel')}\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                type=\"submit\"\r\n              >\r\n                {t('general.save')}\r\n              </Button>\r\n              \r\n            </div>\r\n          </DialogActions>\r\n        </ValidatorForm>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default StockKeepingUnitEditorDialog;\r\n"]},"metadata":{},"sourceType":"module"}