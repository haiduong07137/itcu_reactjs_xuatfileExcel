{"ast":null,"code":"import _toConsumableArray from \"D:\\\\gocBaitap\\\\ETan\\\\ICTUedu\\\\Client2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:\\\\gocBaitap\\\\ETan\\\\ICTUedu\\\\Client2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\gocBaitap\\\\ETan\\\\ICTUedu\\\\Client2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"D:\\\\gocBaitap\\\\ETan\\\\ICTUedu\\\\Client2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\gocBaitap\\\\ETan\\\\ICTUedu\\\\Client2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\gocBaitap\\\\ETan\\\\ICTUedu\\\\Client2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\gocBaitap\\\\ETan\\\\ICTUedu\\\\Client2\\\\src\\\\app\\\\views\\\\Component\\\\Department\\\\SelectDepartmentPopup.jsx\";\nimport { Grid, MuiThemeProvider, TextField, Button, TableHead, TableCell, TableRow, Checkbox, TablePagination, Radio, Dialog, DialogActions } from '@material-ui/core';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport MaterialTable, { MTableToolbar, Chip, MTableBody, MTableHeader } from 'material-table';\nimport { useTranslation, withTranslation, Trans } from 'react-i18next';\nimport { searchByPage } from '../../Department/DepartmentService';\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Draggable from 'react-draggable';\nimport Paper from '@material-ui/core/Paper';\nimport { functions } from 'lodash';\n\nfunction PaperComponent(props) {\n  return /*#__PURE__*/React.createElement(Draggable, {\n    handle: \"#draggable-dialog-title\",\n    cancel: '[class*=\"MuiDialogContent-root\"]',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Paper, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  })));\n}\n\nvar SelectDepartmentPopup = /*#__PURE__*/function (_React$Component) {\n  _inherits(SelectDepartmentPopup, _React$Component);\n\n  var _super = _createSuper(SelectDepartmentPopup);\n\n  function SelectDepartmentPopup(props) {\n    var _this;\n\n    _classCallCheck(this, SelectDepartmentPopup);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      rowsPerPage: 5,\n      page: 0,\n      data: [],\n      totalElements: 0,\n      itemList: [],\n      shouldOpenEditorDialog: false,\n      shouldOpenConfirmationDialog: false,\n      selectedItem: {},\n      keyword: '',\n      checkPermissionUserDepartment: true\n    };\n\n    _this.setPage = function (page) {\n      _this.setState({\n        page\n      }, function () {\n        this.updatePageData();\n      });\n    };\n\n    _this.setRowsPerPage = function (event) {\n      _this.setState({\n        rowsPerPage: event.target.value,\n        page: 0\n      }, function () {\n        this.updatePageData();\n      });\n    };\n\n    _this.handleChangePage = function (event, newPage) {\n      _this.setPage(newPage);\n    };\n\n    _this.updatePageData = function () {\n      var searchObject = {};\n      searchObject.keyword = _this.state.keyword;\n      searchObject.pageIndex = _this.state.page + 1;\n      searchObject.pageSize = _this.state.rowsPerPage;\n      searchObject.checkPermissionUserDepartment = _this.state.checkPermissionUserDepartment;\n      searchByPage(searchObject).then(function (_ref) {\n        var data = _ref.data;\n\n        // let testData = []\n        // let dataT = {}\n        // for (let dep of data.content) {\n        //   dataT = {\n        //     icon: dep.icon,\n        //     id: dep.id,\n        //     parent: dep.parent,\n        //     name: dep.text,\n        //   }\n        //   testData.push(dataT)\n        // }\n        _this.setState({\n          itemList: _toConsumableArray(data.content),\n          // itemList: testData,\n          totalElements: data.totalElements\n        });\n      });\n    };\n\n    _this.handleClick = function (event, item) {\n      //alert(item);\n      if (item.id != null) {\n        _this.setState({\n          selectedValue: item.id,\n          selectedItem: item\n        });\n      } else {\n        _this.setState({\n          selectedValue: null,\n          selectedItem: null\n        });\n      }\n    };\n\n    _this.handleKeyDownEnterSearch = function (e) {\n      if (e.key === 'Enter') {\n        _this.search();\n      }\n    };\n\n    _this.handleChange = function (event, source) {\n      event.persist();\n\n      _this.setState({\n        [event.target.name]: event.target.value\n      }, function () {\n        this.search();\n      });\n    };\n\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(SelectDepartmentPopup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this$props = this.props,\n          open = _this$props.open,\n          handleClose = _this$props.handleClose,\n          selectedItem = _this$props.selectedItem,\n          checkPermissionUserDepartment = _this$props.checkPermissionUserDepartment;\n      this.setState({\n        selectedValue: selectedItem.id,\n        checkPermissionUserDepartment\n      }, function () {\n        this.updatePageData();\n      });\n    }\n  }, {\n    key: \"search\",\n    value: function search() {\n      this.setPage(0, function () {\n        var _this2 = this;\n\n        var searchObject = {};\n        searchObject.keyword = this.state.keyword;\n        searchObject.pageIndex = this.state.page;\n        searchObject.pageSize = this.state.rowsPerPage;\n        searchObject.checkPermissionUserDepartment = this.state.checkPermissionUserDepartment;\n        searchByPage(searchObject).then(function (_ref2) {\n          var data = _ref2.data;\n\n          _this2.setState({\n            itemList: _toConsumableArray(data.content),\n            totalElements: data.totalElements\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          t = _this$props2.t,\n          i18n = _this$props2.i18n,\n          handleClose = _this$props2.handleClose,\n          handleSelect = _this$props2.handleSelect,\n          selectedItem = _this$props2.selectedItem,\n          open = _this$props2.open;\n      var keyword = this.state.keyword;\n      var columns = [{\n        title: t('general.select'),\n        field: 'custom',\n        align: 'left',\n        width: '250',\n        render: function render(rowData) {\n          return /*#__PURE__*/React.createElement(Radio, {\n            name: \"radSelected\",\n            value: rowData.id,\n            checked: _this3.state.selectedValue === rowData.id,\n            onClick: function onClick(event) {\n              return _this3.handleClick(event, rowData);\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 11\n            }\n          });\n        }\n      }, {\n        title: t('component.department.text'),\n        field: 'text',\n        align: 'left',\n        width: '150'\n      }];\n      return /*#__PURE__*/React.createElement(Dialog, {\n        onClose: handleClose,\n        open: open,\n        PaperComponent: PaperComponent,\n        maxWidth: 'md',\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        style: {\n          cursor: 'move'\n        },\n        id: \"draggable-dialog-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"mb-20\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }\n      }, t('component.department.title'))), /*#__PURE__*/React.createElement(DialogContent, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(TextValidator, {\n        label: t('general.enterSearch'),\n        className: \"mb-16 mr-10 w-60\",\n        name: \"keyword\",\n        value: keyword,\n        onKeyDown: this.handleKeyDownEnterSearch,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        className: \"mb-16 mr-16 align-bottom\",\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: function onClick() {\n          return _this3.search(keyword);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }\n      }, t('general.search'))), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(MaterialTable, {\n        data: this.state.itemList,\n        columns: columns,\n        parentChildData: function parentChildData(row, rows) {\n          var list = rows.find(function (a) {\n            return a.id === row.parentId;\n          });\n          return list;\n        },\n        options: {\n          toolbar: false,\n          selection: false,\n          actionsColumnIndex: -1,\n          paging: false,\n          search: false\n        },\n        components: {\n          Toolbar: function Toolbar(props) {\n            return /*#__PURE__*/React.createElement(\"div\", {\n              style: {\n                witdth: '100%'\n              },\n              __self: _this3,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 19\n              }\n            }, /*#__PURE__*/React.createElement(MTableToolbar, Object.assign({}, props, {\n              __self: _this3,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 21\n              }\n            })));\n          }\n        },\n        onSelectionChange: function onSelectionChange(rows) {\n          _this3.data = rows;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(TablePagination, {\n        align: \"left\",\n        className: \"px-16\",\n        rowsPerPageOptions: [1, 2, 3, 5, 10, 25],\n        component: \"div\",\n        count: this.state.totalElements,\n        rowsPerPage: this.state.rowsPerPage,\n        page: this.state.page,\n        backIconButtonProps: {\n          'aria-label': 'Previous Page'\n        },\n        nextIconButtonProps: {\n          'aria-label': 'Next Page'\n        },\n        onChangePage: this.handleChangePage,\n        onChangeRowsPerPage: this.setRowsPerPage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(DialogActions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \"mb-16 mr-36 align-bottom\",\n        variant: \"contained\",\n        color: \"secondary\",\n        onClick: function onClick() {\n          return handleClose();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }\n      }, t('general.cancel')), /*#__PURE__*/React.createElement(Button, {\n        className: \"mb-16 mr-16 align-bottom\",\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: function onClick() {\n          return handleSelect(_this3.state.selectedItem);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }\n      }, t('general.select'))));\n    }\n  }]);\n\n  return SelectDepartmentPopup;\n}(React.Component);\n\nexport default SelectDepartmentPopup;","map":{"version":3,"sources":["D:/gocBaitap/ETan/ICTUedu/Client2/src/app/views/Component/Department/SelectDepartmentPopup.jsx"],"names":["Grid","MuiThemeProvider","TextField","Button","TableHead","TableCell","TableRow","Checkbox","TablePagination","Radio","Dialog","DialogActions","createMuiTheme","React","Component","ReactDOM","MaterialTable","MTableToolbar","Chip","MTableBody","MTableHeader","useTranslation","withTranslation","Trans","searchByPage","ValidatorForm","TextValidator","DialogContent","DialogTitle","Draggable","Paper","functions","PaperComponent","props","SelectDepartmentPopup","state","rowsPerPage","page","data","totalElements","itemList","shouldOpenEditorDialog","shouldOpenConfirmationDialog","selectedItem","keyword","checkPermissionUserDepartment","setPage","setState","updatePageData","setRowsPerPage","event","target","value","handleChangePage","newPage","searchObject","pageIndex","pageSize","then","content","handleClick","item","id","selectedValue","handleKeyDownEnterSearch","e","key","search","handleChange","source","persist","name","bind","open","handleClose","t","i18n","handleSelect","columns","title","field","align","width","render","rowData","cursor","row","rows","list","find","a","parentId","toolbar","selection","actionsColumnIndex","paging","Toolbar","witdth"],"mappings":"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","sourcesContent":["import {\r\n  Grid,\r\n  MuiThemeProvider,\r\n  TextField,\r\n  Button,\r\n  TableHead,\r\n  TableCell,\r\n  TableRow,\r\n  Checkbox,\r\n  TablePagination,\r\n  Radio,\r\n  Dialog,\r\n  DialogActions,\r\n} from '@material-ui/core'\r\nimport { createMuiTheme } from '@material-ui/core/styles'\r\nimport React, { Component } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport MaterialTable, {\r\n  MTableToolbar,\r\n  Chip,\r\n  MTableBody,\r\n  MTableHeader,\r\n} from 'material-table'\r\nimport { useTranslation, withTranslation, Trans } from 'react-i18next'\r\nimport { searchByPage } from '../../Department/DepartmentService'\r\nimport { ValidatorForm, TextValidator } from 'react-material-ui-form-validator'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Draggable from 'react-draggable'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport { functions } from 'lodash'\r\nfunction PaperComponent(props) {\r\n  return (\r\n    <Draggable\r\n      handle=\"#draggable-dialog-title\"\r\n      cancel={'[class*=\"MuiDialogContent-root\"]'}\r\n    >\r\n      <Paper {...props} />\r\n    </Draggable>\r\n  )\r\n}\r\nclass SelectDepartmentPopup extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.handleChange = this.handleChange.bind(this)\r\n  }\r\n  state = {\r\n    rowsPerPage: 5,\r\n    page: 0,\r\n    data: [],\r\n    totalElements: 0,\r\n    itemList: [],\r\n    shouldOpenEditorDialog: false,\r\n    shouldOpenConfirmationDialog: false,\r\n    selectedItem: {},\r\n    keyword: '',\r\n    checkPermissionUserDepartment:true\r\n  }\r\n\r\n  setPage = (page) => {\r\n    this.setState({ page }, function () {\r\n      this.updatePageData();\r\n    })\r\n  }\r\n\r\n  setRowsPerPage = (event) => {\r\n    this.setState({ rowsPerPage: event.target.value, page: 0 }, function () {\r\n      this.updatePageData();\r\n    })\r\n  }\r\n\r\n  handleChangePage = (event, newPage) => {\r\n    this.setPage(newPage)\r\n  }\r\n\r\n  updatePageData = () => {\r\n    var searchObject = {};\r\n    searchObject.keyword = this.state.keyword;\r\n    searchObject.pageIndex = this.state.page + 1;\r\n    searchObject.pageSize = this.state.rowsPerPage;\r\n    searchObject.checkPermissionUserDepartment = this.state.checkPermissionUserDepartment;\r\n    searchByPage(searchObject).then(({ data }) => {\r\n      // let testData = []\r\n      // let dataT = {}\r\n      // for (let dep of data.content) {\r\n      //   dataT = {\r\n      //     icon: dep.icon,\r\n      //     id: dep.id,\r\n      //     parent: dep.parent,\r\n      //     name: dep.text,\r\n      //   }\r\n      //   testData.push(dataT)\r\n      // }\r\n      this.setState({\r\n        itemList: [...data.content],\r\n        // itemList: testData,\r\n        totalElements: data.totalElements,\r\n      })\r\n    })\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  handleClick = (event, item) => {\r\n    //alert(item);\r\n    if (item.id != null) {\r\n      this.setState({ selectedValue: item.id, selectedItem: item })\r\n    } else {\r\n      this.setState({ selectedValue: null, selectedItem: null })\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    let { open, handleClose, selectedItem, checkPermissionUserDepartment } = this.props;\r\n    this.setState({ selectedValue: selectedItem.id, checkPermissionUserDepartment }, function () {\r\n      this.updatePageData();\r\n    })\r\n  }\r\n\r\n  handleKeyDownEnterSearch = (e) => {\r\n    if (e.key === 'Enter') {\r\n      this.search()\r\n    }\r\n  }\r\n\r\n  search() {\r\n    this.setPage(0, function () {\r\n      var searchObject = {};\r\n      searchObject.keyword = this.state.keyword;\r\n      searchObject.pageIndex = this.state.page;\r\n      searchObject.pageSize = this.state.rowsPerPage;\r\n      searchObject.checkPermissionUserDepartment = this.state.checkPermissionUserDepartment;\r\n      searchByPage(searchObject).then(({ data }) => {\r\n        this.setState({\r\n          itemList: [...data.content],\r\n          totalElements: data.totalElements,\r\n        })\r\n      })\r\n    })\r\n  }\r\n\r\n  handleChange = (event, source) => {\r\n    event.persist()\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n    }, function(){\r\n      this.search();\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      t,\r\n      i18n,\r\n      handleClose,\r\n      handleSelect,\r\n      selectedItem,\r\n      open,\r\n    } = this.props\r\n    let { keyword } = this.state\r\n    let columns = [\r\n      {\r\n        title: t('general.select'),\r\n        field: 'custom',\r\n        align: 'left',\r\n        width: '250',\r\n        render: (rowData) => (\r\n          <Radio\r\n            name=\"radSelected\"\r\n            value={rowData.id}\r\n            checked={this.state.selectedValue === rowData.id}\r\n            onClick={(event) => this.handleClick(event, rowData)}\r\n          />\r\n        ),\r\n      },\r\n      {\r\n        title: t('component.department.text'),\r\n        field: 'text',\r\n        align: 'left',\r\n        width: '150',\r\n      },\r\n    ]\r\n    return (\r\n      <Dialog\r\n        onClose={handleClose}\r\n        open={open}\r\n        PaperComponent={PaperComponent}\r\n        maxWidth={'md'}\r\n        fullWidth\r\n      >\r\n        <DialogTitle style={{ cursor: 'move' }} id=\"draggable-dialog-title\">\r\n          <span className=\"mb-20\">{t('component.department.title')}</span>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Grid item xs={12}>\r\n            <TextValidator\r\n              label={t('general.enterSearch')}\r\n              className=\"mb-16 mr-10 w-60\"\r\n              name=\"keyword\"\r\n              value={keyword}\r\n              onKeyDown={this.handleKeyDownEnterSearch}\r\n              onChange={this.handleChange}\r\n            />\r\n            <Button\r\n              className=\"mb-16 mr-16 align-bottom\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => this.search(keyword)}\r\n            >\r\n              {t('general.search')}\r\n            </Button>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <MaterialTable\r\n              data={this.state.itemList}\r\n              columns={columns}\r\n              parentChildData={(row, rows) => {\r\n                var list = rows.find((a) => a.id === row.parentId)\r\n                return list\r\n              }}\r\n              options={{\r\n                toolbar: false,\r\n                selection: false,\r\n                actionsColumnIndex: -1,\r\n                paging: false,\r\n                search: false,\r\n              }}\r\n              components={{\r\n                Toolbar: (props) => (\r\n                  <div style={{ witdth: '100%' }}>\r\n                    <MTableToolbar {...props} />\r\n                  </div>\r\n                ),\r\n              }}\r\n              onSelectionChange={(rows) => {\r\n                this.data = rows\r\n              }}\r\n            />\r\n            <TablePagination\r\n              align=\"left\"\r\n              className=\"px-16\"\r\n              rowsPerPageOptions={[1, 2, 3, 5, 10, 25]}\r\n              component=\"div\"\r\n              count={this.state.totalElements}\r\n              rowsPerPage={this.state.rowsPerPage}\r\n              page={this.state.page}\r\n              backIconButtonProps={{\r\n                'aria-label': 'Previous Page',\r\n              }}\r\n              nextIconButtonProps={{\r\n                'aria-label': 'Next Page',\r\n              }}\r\n              onChangePage={this.handleChangePage}\r\n              onChangeRowsPerPage={this.setRowsPerPage}\r\n            />\r\n          </Grid>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            className=\"mb-16 mr-36 align-bottom\"\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={() => handleClose()}\r\n          >\r\n            {t('general.cancel')}\r\n          </Button>\r\n          <Button\r\n            className=\"mb-16 mr-16 align-bottom\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => handleSelect(this.state.selectedItem)}\r\n          >\r\n            {t('general.select')}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    )\r\n  }\r\n}\r\nexport default SelectDepartmentPopup\r\n"]},"metadata":{},"sourceType":"module"}